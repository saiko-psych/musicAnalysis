% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/musical_experience_time.R
\name{musical_experience_time}
\alias{musical_experience_time}
\title{Process LimeSurvey Musical Experience Time Data}
\usage{
musical_experience_time(
  file,
  min_lastpage = 4,
  id_col = NULL,
  drop_cols =
    "^(lastpage|startdate|submitdate|startlanguage|seed|datestamp|instruction.*|instructionsinging.*)$",
  daily_max_hours = 12,
  weekly_max_hours = 84,
  weeks_per_year = 365/7,
  check_instruments = TRUE,
  verbose = TRUE
)
}
\arguments{
\item{file}{Path to the LimeSurvey CSV export file.}

\item{min_lastpage}{Keep rows where \code{lastpage == min_lastpage} (default: 4).}

\item{id_col}{Optional name of the column that should be used as \code{code}.
If \code{NULL} and a \code{code} column exists, it is used as-is; otherwise a synthetic
\code{code} is created.}

\item{drop_cols}{Regex for administrative/instruction columns to drop.}

\item{daily_max_hours}{Max realistic hours per day (default: 12).}

\item{weekly_max_hours}{Max realistic hours per week (default: 84).}

\item{weeks_per_year}{Weeks per year (default: \code{365/7}).}

\item{check_instruments}{If \code{TRUE}, checks \verb{whichinstrument*} against an extended
DE/EN lexicon and reports unrecognized entries.}

\item{verbose}{Print progress information (default: TRUE).}
}
\value{
A list with:
\itemize{
\item \code{long}: columns \code{code}, \code{category} (instrument/singing/othermusic),
\code{category_id}, \code{age_years}, \code{time_str}, \code{yearly_hours}, \code{played_category}, \code{flag_code}.
\item \code{wide}: one row per \code{code} with aggregated hours per category/id
(e.g., \code{instrument1}, \code{singing2}, \code{othermusic1}) plus standardized
\verb{which*} / \verb{type*} free-text columns (e.g., \code{whichothermusic1}).
\item \code{flags}: problematic time entries (invalid/unrealistic).
\item \code{instrument_warnings}: unrecognized instruments (if \code{check_instruments=TRUE}).
}
}
\description{
Reads and processes LimeSurvey data about musical experience, including
instrument, singing, and other music practice time by age. Returns both
long format (detailed) and wide format (summary) data frames.
}
\details{
The per-age columns are assumed to follow the pattern
\code{categoryXY[a_b]}, where \code{category} is one of \code{"instrument"}, \code{"singing"},
or \code{"othermusic"}, \code{X} is the category index (1\u20139), \code{Y} is the age decade
(0\u20139), and \code{b} is the year within the decade (0\u20139). The age in years is
computed as \code{10*Y + b}. Examples:
\itemize{
\item \verb{instrument10[1_0]} \u2192 instrument 1, age 0
\item \verb{instrument12[1_3]} \u2192 instrument 1, age 23
\item \verb{instrument23[1_0]} \u2192 instrument 2, age 30
}

Time inputs accept the following forms (case-insensitive):
\itemize{
\item \code{"Nd"} or \code{"Nw"} (e.g., \code{"2d"}, \code{"7w"})
\item decimal with dot or comma: \code{"N.Nd"}, \code{"N,Nw"} (e.g., \code{"1.5d"}, \code{"1,5w"})
\item decimal + slash: \code{"N.N/d"}, \code{"N,N/w"} (e.g., \code{"1,5/d"}, \code{"1,5/w"})
\item fractions: \code{"a/bd"}, \code{"a/bw"} (e.g., \code{"1/2w"})
\item short fractions: \code{"a/d"}, \code{"a/w"} (interpreted as \code{"ad"}, \code{"aw"})
}

Entries above \code{daily_max_hours} (per day) or \code{weekly_max_hours} (per week)
are flagged as unrealistic.
}
\examples{
\dontrun{
res <- musical_experience_time("data/LimeSurvey/.../musikalische_vorerfahrung_05062025.csv")
res$long; res$wide; res$flags; res$instrument_warnings
}
}
