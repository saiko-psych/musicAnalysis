% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{validate_dataset}
\alias{validate_dataset}
\title{Validate presence of required columns in a parsed dataset}
\usage{
validate_dataset(
  df,
  required = c("group", "measurement", "pc", "code", "date", "volume_difference",
    "pitch", "onset_difference", "pitch_duration_difference", "file"),
  return_type = c("stop", "text", "logical")
)
}
\arguments{
\item{df}{A data.frame/tibble produced by one of the parsers.}

\item{required}{Character vector of required column names. Defaults to the
canonical KLAWA schema:
\code{c("group","measurement","pc","code", "volume_difference","pitch","onset_difference", "pitch_duration_difference","file")}.}

\item{return_type}{Character: "text" returns formatted text, "logical" returns TRUE/FALSE,
"stop" throws error if validation fails (default for backwards compatibility).}
}
\value{
If \code{return_type = "text"}, a character string with validation report.
If \code{return_type = "logical"}, TRUE if valid, FALSE otherwise.
If \code{return_type = "stop"}, \code{df} (invisibly) if valid, or throws error.
}
\description{
Defensive check to run immediately after parsing (e.g., after \code{\link[=klawa_scan]{klawa_scan()}}).
Verifies that all required columns exist so downstream merges/summaries do not
fail unexpectedly. Returns formatted validation report.
}
\section{When to customize \code{required}}{

If you add new parsers to \pkg{musicAnalysis}, extend the required set for
that dataset in your analysis scripts (e.g., add new metric columns or keys).
}

\examples{
\dontrun{
df <- klawa_scan("data/KLAWA")
validate_dataset(df)  # error if any required column is missing
validate_dataset(df, return_type = "text")  # formatted report
}
}
