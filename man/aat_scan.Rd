% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/aat.R
\name{aat_scan}
\alias{aat_scan}
\title{Scan AAT (Auditory Ambiguity Test) CSV files}
\usage{
aat_scan(
  root,
  code_pattern = "(\\\\d{4}[A-Za-z]{4})",
  ambiguous_items = NULL,
  control_items = NULL
)
}
\arguments{
\item{root}{Directory containing AAT CSV files (will scan recursively).}

\item{code_pattern}{Regex pattern for extracting participant codes from filenames.
Default: \code{"(\\\\d{4}[A-Za-z]{4})"} (4 digits + 4 letters).}

\item{ambiguous_items}{Optional numeric vector of item indices that are ambiguous.
If NULL, will attempt to detect from data or assume all non-control items.}

\item{control_items}{Optional numeric vector of item indices that are control items.
If NULL, will attempt to detect from data.}
}
\value{
A tibble with columns:
\itemize{
\item \code{code}: Participant code (from filename)
\item \code{ambiguous_pct}: Percentage of f0-responses (1) in ambiguous items (rounded to 1 decimal)
\item \code{control_pct}: Percentage correct in control items (rounded to 1 decimal)
\item \code{n_ambivalent}: Count of ambivalent responses (code 2)
\item \code{n_dont_know}: Count of "don't know" responses (code -1)
\item \code{n_evaluable}: Number of evaluable trials (codes 0 or 1)
\item \code{n_total}: Total number of trials
\item \code{file}: Relative path to source CSV file
}
}
\description{
Recursively scans a directory for AAT response CSV files (*.itl.csv or *.csv),
extracts participant codes, and calculates AAT metrics:
\itemize{
\item Ambiguous (\%): Percentage of f0-responses (code 1) in ambiguous items
\item Control (\%): Percentage correct in control items
\item Quality metrics: counts of ambivalent (2) and "don't know" (-1) responses
}
}
\details{
\strong{File format expected}:
\itemize{
\item CSV files with column "Pitch Classification" containing:
\itemize{
\item 0 = spectral/overtone response
\item 1 = fundamental (f0) response
\item 2 = ambivalent
\item -1 = don't know
}
\item Filename format: \verb{AAT_response_<CODE>_<DATE>.itl.csv} or similar
}

\strong{Calculation logic}:
\itemize{
\item Only codes 0 and 1 are included in percentage calculations (evaluable responses)
\item Codes 2 and -1 are excluded from denominators but counted separately
\item Ambiguous \%: (count of 1's in ambiguous items) / (count of 0's and 1's in ambiguous items) * 100
\item Control \%: (count correct in control items) / (total control items) * 100
}
}
\examples{
\dontrun{
# Scan all AAT files in folder
aat_data <- aat_scan("data/AAT")

# View results
View(aat_data)

# Filter for participants with high quality (few ambivalent responses)
aat_clean <- aat_data \%>\%
  filter(n_ambivalent < 5, n_dont_know < 3)
}
}
